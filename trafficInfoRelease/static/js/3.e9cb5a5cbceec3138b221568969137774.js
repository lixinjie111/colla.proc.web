webpackJsonp([3],{GK7r:function(t,e){},xJsL:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("3cXf"),n=i.n(a),o=i("jMDJ"),s={name:"Login",data:function(){return{loginForm:{name:"",pass:""},loginRules:{name:[{validator:function(t,e,i){if(!e)return i(new Error("请填写用户名"));i()},trigger:"blur"}],pass:[{validator:function(t,e,i){""===e?i(new Error("请输入密码")):i()},trigger:"blur"}]},loading:!1,visibleFlag:!1}},created:function(){var t=localStorage.getItem("yk-token");if(t){var e=JSON.parse(t);if((new Date).getTime()-e.time>864e5)console.log("信息已过期"),this.removeStorage();else{var i={token:e.data,platform:"40000"};this.loginFunc(i)}}else this.removeStorage()},methods:{handleLogin:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return t.loading=!1,!1;t.loading=!0;var i={userNo:t.loginForm.name,password:t.loginForm.pass,platform:"40000"};t.loginFunc(i)})},loginFunc:function(t){var e=this;this.$api.post("openApi/user/login",t,function(t){if(e.loading=!1,t.status>=200&&t.status<300)if(200==t.data.status){var i=t.data.data;o.a.setItem("login",JSON.parse(i)),localStorage.setItem("yk-token",n()({data:JSON.parse(i).token,time:(new Date).getTime()})),e.$router.push("/infoRelease")}else e.$message({type:"error",duration:"1500",message:t.data.message,showClose:!0}),e.removeStorage();else e.removeStorage()},function(t){e.loading=!1,e.removeStorage()},"login")},removeStorage:function(){o.a.clearItems(),localStorage.removeItem("yk-token"),this.visibleFlag=!0}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visibleFlag?i("div",{attrs:{id:"login-warpper"}},[i("img",{staticClass:"login-logo",attrs:{src:"static/images/login-logo.png"}}),t._v(" "),i("div",{staticClass:"login-container"},[i("img",{staticClass:"login-bg",attrs:{src:"static/images/login-bg.jpg"}}),t._v(" "),i("div",{staticClass:"login-content"},[t._m(0),t._v(" "),i("div",{staticClass:"login-card"},[t._m(1),t._v(" "),i("div",{staticClass:"login-item-box"},[i("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"label-position":"right","label-width":"105px"}},[i("el-form-item",{staticClass:"login-item",attrs:{prop:"name",label:"用户名"}},[i("el-input",{attrs:{type:"text",maxlength:40,placeholder:"请输入用户名"},model:{value:t.loginForm.name,callback:function(e){t.$set(t.loginForm,"name","string"==typeof e?e.trim():e)},expression:"loginForm.name"}})],1),t._v(" "),i("el-form-item",{staticClass:"login-item",attrs:{prop:"pass",label:"密码"}},[i("el-input",{attrs:{type:"password",maxlength:20,placeholder:"请输入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.pass,callback:function(e){t.$set(t.loginForm,"pass","string"==typeof e?e.trim():e)},expression:"loginForm.pass"}})],1)],1),t._v(" "),i("el-button",{staticClass:"login-button",attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登 录")])],1)])])]),t._v(" "),t._m(2)]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-left"},[e("p",{staticClass:"login-left-title"},[this._v("云控，启迪未来")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-header"},[e("div",{staticClass:"login-title"},[this._v("信息协同中心")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-bottom"},[e("span",[this._v("建议浏览器：Chrome")]),this._v(" "),e("span",[this._v("建议分辨率：1920x1080")])])}]};var r=i("C7Lr")(s,l,!1,function(t){i("GK7r"),i("xvXv")},"data-v-699058ac",null);e.default=r.exports},xvXv:function(t,e){}});
//# sourceMappingURL=3.e9cb5a5cbceec3138b221568969137774.js.map